# 《在线视频技术精要》学习笔记

以前需求解码卡来解码的。

![1-1](D:\0-博客\study_log\《在线视频技术精要》\1-1.png)

注意互联网视听许可证，牌照等东西。

![1-2](D:\0-博客\study_log\《在线视频技术精要》\1-2.png)

从 Vista 系统开始，微软提供了 多媒体框架 Media Foundation。

![1-3](D:\0-博客\study_log\《在线视频技术精要》\1-3.png)

Hulu 北京分部。

![1-4](D:\0-博客\study_log\《在线视频技术精要》\1-4.png)

注意这个分段转码技术。

![1-5](D:\0-博客\study_log\《在线视频技术精要》\1-5.png)

腾讯推英剧频道，还有建立了 音视频实验室。

![1-6](D:\0-博客\study_log\《在线视频技术精要》\1-6.png)

B站的收入模式。

![1-7](D:\0-博客\study_log\《在线视频技术精要》\1-7.png)

形形色色的玩家

![1-8](D:\0-博客\study_log\《在线视频技术精要》\1-8.png)

中国的机顶盒市场。

![1-9](D:\0-博客\study_log\《在线视频技术精要》\1-9.png)

找到一些 音视频技术需求，做 SaaS 好像也可以。

![2-1](D:\0-博客\study_log\《在线视频技术精要》\2-1.png)

封装技术的出发点。

> 举例而言，一个MP4文件内，可能包含通过H.264技术编码的视频内容以及通过AAC技术编码的音频内容，而MP4文件如何规范视频、音频及其他信息在这单一文件内的存储方式，则被称作打包技术或封装技术。不同编码技术的出发点大体一致，都是为了让音视频内容的质量可以损失更小，压缩率更高，不同的文件封装技术则略有不同，有些是为了支持特定的编码技术，有些则希望通过支持多种不同的编码技术，成为较为通用的容器。下文将分门别类地介绍一些常见、典型的文件和编码格式。



RMVB 格式原理是 RealNetworks 公司出的。RMVB 不需要下载完整文件即可播放

> RM即RealMedia，是RealNetworks公司创建的专用多媒体容器格式，文件扩展名多用“.rm”，通常用于RealVideo和RealAudio的结合，一般是CBR（固定码率）编码，RMVB则是RM的换代格式，支持可变码率。RM格式的主要特征在于不需要下载完整文件即可播出，并可以根据不同的网络传输速率制定不同的压缩比率，可见它一开始就定位在流媒体应用方面。
>



立体声因为音箱分处不同位置，可以一定程度还原声音的空间感和层次感。

![2-4](D:\0-博客\study_log\《在线视频技术精要》\2-4.png)



---

AVC 就是 H.264。

> 标准MPEG4Part10，Advanced Video Coding中规定的编码格式，缩写为MPEG-4AVC，又称作H.264，是当前应用最为广泛的视频编码格式。编码格式基于较新的运动补偿的方式设计，第一个版本于2003年完成，陆续增加了多个新特性，其MPEG4AVC的名称来自于MPEG组织，而H.264的命名则延续了ITU-T社区的约定。关于H.264技术的详细内容，后文将给予专门的介绍。



HEVC 的全称是 High Efficiency Video Coding简称HEVC

> High Efficiency Video Coding简称HEVC，又称作H.265。与H.264相似，两个不同名称分别来自于ISO/IEC MPEG工作组和ITU-T，目标是替代H.264成为新一代视频编码标准。HEVC在编码效率上较H.264有接近50%的提升，可以支持最高8K分辨率，当然作为代价，在编码方法上也更为复杂。与H.264类似，HEVC也采用Hybrid（混合）编码架构（见图1-17），但加入了许多新的工具集。此外，该标准也拓展到360度视频、3D视频等。



AV1 完全开源以及免费。

> 另一方面，由于HEVC推广步履维艰，与之竞争的编码标准格式近年吸引了大量关注，除YouTube外，Netflix等很多其他公司也大量采用VP9格式编码视频，以及持续关注号称完全开源和免费的AV1。



标准制定的流程。

> 当新标准的范围已经被充分讨论和划分，MPEG通常会发布CfP（即Calls for Proposals，提案征集），根据标准的性质可能会产生不同的文件，例如测试模型，用编程语言描述的编码器和编码器的行为。如果MPEG已经对开发中的标准稳定性有信心，就发布WD（Working Draft，工作草案），其形式已经贴近标准文档，但同时仍在持续修订，直到变成CD（即Committee Draft，草案），随后经由投票，成为FCD（Final Committee Draft，最终委员会草案），如果通过了二次投票，则成为IS（International Standard，国际标准）。



注意这些 视频技术会议。

> 此外，由于链接研究与工程的需求越来越大，强烈建议大家关注一些学术界的会议，例如多媒体领域的：·ICIP（International Conference on Image Processing，图像处理国际会议）。·DCC（Data Compression Conference，数据压缩会议）。·ACM MM（Association for Computing Machinery on Multimedia，计算机械协会的多媒体年会）。计算机视觉领域的：·CVPR（Conference on Computer Vision and Pattern Recognition，计算机视觉与模式识别会议）。·ICCV（International Conference on Computer Vision，计算机视觉国际会议）。



> 曾真正服务或影响十亿级用户的音视频框架，只有DirectShow、Media Foundation、Helix、FFMpeg、Android Media、AVFoundation等寥寥几种



DirectShow 是基于 COM 技术的。

> DirectShow基于微软的COM技术（Component Object Model）[插图]，以C++开发，但用户不必自己开发COM对象，只需要使用或继承框架提供的组件即可

![2-6](D:\0-博客\study_log\《在线视频技术精要》\2-6.png)

---

DirectShow 实现 自己的filter。

> DirectShow包含了一组基础的Filter类。对于新开发的Filter，应继承某一个基础类（如CTransformFilter）。开发者需要关注以下问题。·实现Filter所需的各项接口。·定义Pin上的MediaType和内存分配，实现相应接口。·定义线程模型，区分在不同线程内的工作以及它们的同步问题。·实现不同状态变化下对数据的处理，如Pause、Delivery、Receive、Flush等。·调整和控制数据流动的速率。·注册和提供新的文件或编码类型。·支持Filter的属性查询。

---

Media Foundation

> 如同其他现代框架，Media Foundation提供命令行工具MFTrace和可视化工具［如TopoEdit（见图2-6）等］给开发者使用，更多详细内容仍可参考MSDN中的介绍。



RSD 优化启动时间。

> RSD（即Reduce Startup Delay，降低启动延迟）是一项针对RTSP或RTMP协议流媒体传输时优化启动时间的技术，因为播放器在开始播放前需要得到足够的缓冲数据，且播放需要从关键帧开始。由于在服务器中直播流存在一定长度的缓冲，当客户端发起请求时，服务端首先将保证从关键帧开始发送，而非简单地发送所持有的时间戳最早的包；其次，服务器会在发送初期按照3倍速率发送，以帮助播放器尽快填满缓冲区，开始播放。点播场景中的思路相似，服务端将在指定播放位置附近找到最近关键帧再行发送。



码率控制。

> RSD（即Reduce Startup Delay，降低启动延迟）是一项针对RTSP或RTMP协议流媒体传输时优化启动时间的技术，因为播放器在开始播放前需要得到足够的缓冲数据，且播放需要从关键帧开始。由于在服务器中直播流存在一定长度的缓冲，当客户端发起请求时，服务端首先将保证从关键帧开始发送，而非简单地发送所持有的时间戳最早的包；其次，服务器会在发送初期按照3倍速率发送，以帮助播放器尽快填满缓冲区，开始播放。点播场景中的思路相似，服务端将在指定播放位置附近找到最近关键帧再行发送。



开源协议。

![2-7](D:\0-博客\study_log\《在线视频技术精要》\2-7.png)



嵌入式设备自带 Gstreamer

> 当使用嵌入式设备时，由于其开发套件内通常已含有Gstreamer，

![2-8](D:\0-博客\study_log\《在线视频技术精要》\2-8.png)



VLC 是 巴黎学生建立的。

> VideoLAN（见图2-16）是一个开源的、完整的视频流媒体和播放软件的解决方案，最初由Ecole Centrale Paris（巴黎中央理工学院）的学生建立，目的是在高带宽网络上传输MPEG视频。



x264 也是 VideoLAN 旗下的。

> x264（见图2-18）是VideoLAN旗下，按照GPL协议开源的H.264/AVC视频编码器，并接受商业授权给谈判付费的使用。

> 初始，x264由Laurent Aimar建立，在2004年Loren Merritt接手项目，2005年的第二届MSU编码器大赛上，x264获得第二名，建立了最初的名气，到了2010年，x264在多个项目上均获得第一（见图2-19），并大幅领先其他参赛者，被认为是最好的H.264/AVC编码器，Dark Shikari（真名Jason Garrett-Glaser）加入x264的开发被很多人认为是它脱颖而出的重大因素。



OMX又称OpenMax，是由NVIDIA提出的多媒体应用的框架标准，

> OMX又称OpenMax，是由NVIDIA提出的多媒体应用的框架标准，定义了跨平台的应用程序接口API，帮助不同组件在不同操作系统和处理器硬件平台之间移植。OpenMax从下至上分为三层，包括OpenMax DL（开发层）、OpenMax IL（集成层）以及OpenMax AL（应用层），如图2-22所示。实际使用中，OpenMax IL多被用到，只要符合接口定义，不论是原生组件，还是软硬件厂商自行开发的组件，均可被集成使用。
