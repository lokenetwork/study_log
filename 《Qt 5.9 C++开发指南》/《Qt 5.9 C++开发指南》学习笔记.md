# 《Qt 5.9 C++开发指南》学习笔记



Qt 的文件读写也自己做了封装，没用标准库。可能是因为 Qt 是 1994 年的， 94 年，C语言标准库还没成熟通用吧。



Qt 实际上 是一套类库。

> Qt 实际上 是一 套 应用 程序 开发 类 库， Qt 类 库 由 许多 模块 组成， 如 核心 的 GUI 组件 模块 Qt Widget， 用于 数据库 访问 的 Qt SQL 模块， 用于 二维 图表 显示 的 Qt Charts 模块， 用于 数据 三维 显示 的 Qt Data Visualization 模块， 用于 网络 编程 的 Qt Network 模块 等。 Qt 的 模块 很多， 在 一本 书里 很难 全面 介绍 到， 本书 只 介绍 应用 程序设计 常用 的 功能 模块 的 使用。
>



Qt 的版权情况。

> Qt 的 许可 类型 分为 商业 许可 和 开源 许可， 开源 许可 又 分为 LGPLV3 和 GPLV2/ GPLV3。 商业 许可 允许 开发者 不公 开 项 目的 源 代码， 其 Qt 版本 包含 更多 的 模块（ 某些 模块 只有 商业 许可 的 版本 里 才有）， 并能 获得 Qt 公司 的 技术 支持。 当然， 购买 Qt 商业 许可 需要 支付 费用。
>



不同环境的 Qt 类。

> 3． Build & Run 设置： 图 1- 4 显示 的 是 Build & Run 的 设置 界面， 它有 以下 几个 页面。 （1） Kits 页面 显示 Qt Creator 可用 的 编译 工具， 在 图中 可以 看到 有 3 个 编译 工具 可用。 （2） Qt Versions 页面 显示 安装 的 Qt 版本， 有 Qt 5. 9. 1 MinGW 32bit、 Qt 5. 9. 1 MSVC2015 32bit 和 Qt 5. 9. 1 MSVC2015 64bit 3 个 可用 的 版本。



Qt 的 ui 文件用的是 xml 布局。

> 窗体 界面 文件 widget. ui， 一个 XML 格式 存储 的 窗体 上 的 元件 及其 布局 的 文件。
>



这些配置应该会导致 link.exe 把 gui.lib 等库链接进来。

> Qt += core gui



不用修改 `objectName`，让他自动命名即可。

> 在 界面 设计 时， 对 需要 访问 的 组件 修改 其 objectName， 如 各个 按钮、 需要 读取 输入 的 编辑 框、 需要 显示 结果 的 标签 等， 以便 在 程序 里 区分。 对于 不需要 程序 访问 的 组件 则 无需 修改 其 objectName， 如用 于 界面 上 组件 分组 的 GroupBox、 Frame、 布局 等， 让 UI 设计 器 自动 命名 即可。
>



组件 面板 里 有 Layouts 和 Spacers 

> 组件 面板 里 有 Layouts 和 Spacers 两个 组件 面板。
>



> 在 UI 设计 器 里 可 视 化 设计 布局 时， 要 善于 利用 水平 和 垂直 空格 组件， 善于 设置 组件 的 最大、 最小 宽度 和 高度 来 实现 某些 需要 的 布局 效果。
>



如何添加图标。

> 用 Qt Creator 创建 的 项目 编译 后的 可执行 文件 具有 默认 的 图标， 如果 需要 为 应用 设置 一个 自己的 图标， 其 操作 很 简单， 只需 两步。 将 一个 图标 文件（ 必须 是“. ico” 后缀 的 图标 文件） 复制 到 项目 源程序 目录 下。 在 项目 配置文件 里 用 RC_ ICONS 设置 图标 文件名， 添加 下面 一行 代码。
>



Qt 的 MOC 预处理器。

> Qt 的 元 对象 编译器（ Meta- Object Compiler， MOC） 是 一个 预处理 器，
>



> Qt 对 标准 C++ 进行 了 扩展， 引入 了 一些 新的 概念 和 功能， 例如 信号 与 槽、 对象 属性 等。 Qt 的 元 对象 编译器（ Meta- Object Compiler， MOC） 是 一个 预处理 器， 在 源程序 被 编译 前 先 将 这些 Qt 特性 的 程序 转换 为 标准 C++ 兼容 的 形式， 然后 再由 标准 C++ 编译器 进行 编译。 这就 是 为什么 在使 用 信号 与 槽 机制 的 类 里， 必须 添加 一个 Q_ OBJECT 宏 的 原因， 只有 添加 了 这个 宏， moc 才 能对 类 里 的 信号 与 槽 的 代码 进行 预处理。
>



> Qt Core 模块 是 Qt 类 库 的 核心， 所有 其他 模块 都 依赖 于此 模块， 如果 使用 qmake 来 构建 项目， Qt Core 模块 则是 被 自动 加入 的。
>



二进制兼容。

> Qt 基本 模块 是 Qt 在 所有 平 台上 的 基本 功能， 它们 在 所有 的 开发 平台 和 目标 平台 上 都可 用， 在 Qt 5 所有 版 本上 是 源 代码 和 二进制 兼容 的。 
>



Qt 还支持这种 `-=` 的语法。

> QT -= gui



窗口的模态。

> setWindowModality() 函数 用于 设置 窗口 的 模态， 只对 窗口 类型 有用。 其 函数 原型 为：



> Qt 提供 了 两种 读写 纯 文本 文件 的 基本 方法， 一种 是 用 QFile 类 的 IODevice 读写 功能 直接进行 读写， 另一种 是 利用 QFile 和 QTextStream 结合 起来， 用 流（ Stream） 的 方法 进行 文件 读写。



所有操作系统都有临时目录的，利用这个特性可以提高开发效率。

> QTemporaryDir 是 用于 创建、 删除 临时 目录 的 类， 其 主要 函数 见表 7- 10。
>



强制 MSVC UTF-8 编码。

> 强制 MSVC 编译器 采用 UTF- 8 编码 生成 可执行 文件， 需要 在 每个 使用 到 中文 字符串 的 头 文件 和 源程序 文件 的 前部 加入 如下 的 语句：
>
> #if _MSC_ VER >= 1600 //MSVC2015> 1899, MSVC_ VER= 14. 0 
>
> #pragma execution_ character_ set(" utf- 8") 
>
> #endif



`Qt Concurrent` 应该有很多类似的封装类，其他的框架也有。

> 使用 Qt Concurrent 实现 的 多 线程 程序 可以 自动 根据 处理器 内核 个数 调整 线程 个数。
>

